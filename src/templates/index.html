{% extends "base.html" %}
{% block content %}
<html>
  <head>
    <title>My Dating Profile</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
  </head>

  <body>
    <h1 class="text-center mb-4">My Dating Profile</h1>

    <div class="container">
        <form method="post" enctype="multipart/form-data">
          <label for="name">Name:</label>
          <input type="text" name="name" class="form-control"><br>

          <label for="bio">Bio:</label>
          <textarea name="bio" class="form-control"></textarea><br>

          <div class="image-upload-container d-flex justify-content-between">
            {% for _ in range(3) %}
            <div class="image-upload-box">
              <input type="file" name="picture" class="image-input" id="image-input-{{ loop.index }}">
                <div class="upload-placeholder d-flex justify-content-center align-items-center" data-input="image-input-{{ loop.index }}">
                    <span class="plus-sign">+</span>
                </div>
                <img src="" class="image-preview" alt="Image Preview">
                <img src="static/microscope/microscop.jfif" class="zoom-icon" alt="Zoom Icon" title="Click to view in fullscreen">
            </div>
            {% endfor %}
          </div>

          <br>
          <input type="submit" value="Submit" class="btn btn-primary">
        </form>
    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script>
        $('.upload-placeholder').on('click', function() {
            const inputId = $(this).data('input');
            $('#' + inputId).trigger('click');
        });

        $('.image-input').on('change', function() {
          const input = $(this);
          const file = this.files[0];
          if (file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                input.siblings('.image-preview').attr('src', e.target.result).show();
                input.siblings('.zoom-icon').show();
                input.siblings('.upload-placeholder').hide();
            }
            reader.readAsDataURL(file);
          }
        });

        $('.zoom-icon').on('click', function() {
          const src = $(this).siblings('.image-preview').attr('src');
          const overlay = $('<div>').css({
            background: `rgba(0,0,0,0.8) url(${src}) no-repeat center`,
            backgroundSize: 'contain',
            position: 'fixed',
            top: 0,
            left: 0,
            width: '100%',
            height: '100%',
            zIndex: 1000,
            cursor: 'pointer'
          }).on('click', function() {
            $(this).remove();
          });

          $('body').append(overlay);
        });
    </script>
  </body>
</html>
{% endblock %}

